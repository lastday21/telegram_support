# SmartHelper Telegram Bot

Проект **support\_telegram** служит для быстрого взаимодействия с AI‑помощником и OCR/STS функциями через Telegram‑бота и горячие клавиши в системе.

## Основные возможности

* **Горячие клавиши** (Alt+Q, Alt+1…Alt+9) для запуска действий в фоне без прерывания рабочего процесса:

  * Alt+Q — диктовка через микрофон и преобразование речи в текст.
  * Alt+1…Alt+9 — быстрые учебные подсказки (низкоуровневые, разделённые на шаги).
* **Скриншот → OCR → AI**: при нажатии горячей клавиши делается скриншот, из него извлекается текст посредством OCR (Tesseract), затем текст уходит к AI‑ассистенту.
* **Telegram‑бот**: пересылает текстовые сообщения и изображения к вашему карточному чату — удобно для хранения заметок и идей на мобильном.
* **Гибкая настройка подсказок**: список учебных запросов хранится в конфиге и может быть легко расширен.

## Структура проекта

```
support_telegram/
├── src/
│   ├── domain/
│   │   ├── audio/       # запись и преобразование микрофонного ввода
│   │   │   └── recorder.py
│   │   └── ocr/         # захват экрана и OCR
│   │       └── capture.py
│   ├── infra/          # интеграции с внешними сервисами
│   │   ├── audio_devices.py
│   │   ├── yandex_gpt.py  # модуль AI-интеграции (замените на свой провайдер при необходимости)
│   │   └── yandex_stt.py  # модуль преобразования речи в текст
│   ├── interfaces/
│   │   ├── hotkeys/listener.py  # тонкий клиент для обработки горячих клавиш
│   │   └── telegram/
│   │       ├── bot.py           # основная логика Telegram‑бота
│   │       └── sender.py        # обёртка для отправки сообщений и фото
│   └── main.py           # точка входа: инициализация всех компонентов
├── tests/                # модульные тесты
├── .env.example          # пример файла окружения
├── requirements.txt      # зависимости проекта
└── README.md             # этот файл
```

## Установка и запуск

1. Клонировать репозиторий:

   ```bash
   git clone https://github.com/lastday21/telegram_support
   cd telegram_support
   ```
2. Создать виртуальное окружение и установить зависимости:

   ```bash
   python3 -m venv venv
   source venv/bin/activate      # Linux/macOS
   venv\Scripts\activate       # Windows
   pip install -r requirements.txt
   ```
3. Скопировать `.env.example` → `.env` и заполнить переменные:

   ```dotenv
   TELEGRAM_BOT_TOKEN=<ваш токен>
   CHAT_ID=<ваш chat_id>
   ```
4. Запустить приложение:

   ```bash
   python src/main.py
   ```

## Конфигурация

* **Горячие клавиши** настраиваются в `src/interfaces/hotkeys/listener.py`. При необходимости можно включать/выключать через флаг `DEBUG_HOTKEYS`.
* **Список подсказок** (`PROMPTS`) находится в `src/interfaces/hotkeys/listener.py`. Рекомендуется вынести длинные тексты в отдельный JSON-файл и загружать по ссылке.
* **AI-интеграция**: можно заменить модуль `yandex_gpt.py` на любой другой провайдер, реализующий интерфейс `solve_text(prompt: str)`.

## Использование

* **Горячие клавиши**:

  * Alt+Q — начать запись речи и отправить результат в Telegram‑чат.
  * Alt+1…Alt+9 — отправить одну из заранее настроенных подсказок.
* **Telegram‑команды**:

  * `/start` — приветственное сообщение и справка.
  * `/tips` — вывести список доступных учебных подсказок.
  * `/tip <номер>` — отправить конкретную подсказку по индексу.

## Тестирование

Запустите команду:

```bash
  pytest
```


